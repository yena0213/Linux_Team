#!/bin/bash

# ==============================
# 점수 향상 계산 스크립트
# ==============================

clear
echo "=============================="
echo "     📈 성적 향상 계산기"
echo "=============================="
echo

# 현재 사용자 출력(시스템 명령어)
echo "👤 사용자: $(whoami)"
echo "💻 호스트: $(hostname)"
echo "------------------------------"
echo

# 점수 입력 받기
read -p "이전 점수 입력: " old
read -p "현재 점수 입력: " new

# 숫자인지 확인 (grep 활용)
if ! echo "$old" | grep -Eq '^[0-9]+$' || ! echo "$new" | grep -Eq '^[0-9]+$'; then
    echo "❌ 숫자만 입력하세요."
    exit 1
fi

# 점수 차이 계산 (expr 또는 $(( )) 사용)
diff=$(( new - old ))

# bc를 이용한 퍼센티지 계산(소수점 가능)
percent=$(echo "scale=2; ($diff / $old) * 100" | bc)

echo
echo "=============================="
echo "📊 계산 결과"
echo "=============================="

# wc, date 등 시스템 명령어 활용
echo "⏱ 계산 시간: $(date '+%Y-%m-%d %H:%M:%S')"
echo "📄 스크립트 라인 수: $(wc -l < "$0") 줄"
echo

echo "📌 이전 점수: $old 점"
echo "📌 현재 점수: $new 점"
echo "📌 점수 상승량: $diff 점"
echo "📌 향상된 비율: ${percent}%"

echo
echo "=============================="
echo "✨ 계산 완료!"
echo "=============================="
